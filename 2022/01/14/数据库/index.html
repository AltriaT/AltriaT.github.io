

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=&#34;auto&#34;>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/shiki.png">
  <link rel="icon" href="/img/shiki.png">
  <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="description" content="">
  <meta name="author" content="Ding">
  <meta name="keywords" content="">
  
  <title>数据库 - AltriaT</title>

  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css" />


  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/github-markdown-css@4.0.0/github-markdown.min.css" />
  <link  rel="stylesheet" href="/lib/hint/hint.min.css" />

  
    
    
      
      <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@10.7.2/styles/github-gist.min.css" />
    
  

  
    <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css" />
  



<!-- 主题依赖的图标库，不要自行修改 -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_ba1fz6golrf.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_kmeydafke9r.css">


<link  rel="stylesheet" href="/css/main.css" />

<!-- 自定义样式保持在最底部 -->


  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    var CONFIG = {"hostname":"altriat.top","root":"/","version":"1.8.11","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"right","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"copy_btn":true,"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null}},"search_path":"/local-search.xml"};
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
<meta name="generator" content="Hexo 5.4.0"></head>


<body>
  <header style="height: 70vh;">
    <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand"
       href="/">&nbsp;<strong>AltriaT</strong>&nbsp;</a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                首页
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                归档
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                分类
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                标签
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                关于
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" target="_blank" rel="noopener" href="https://vlgs.top/">
                <i class="iconfont icon-link-fill"></i>
                vlgs
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" data-toggle="modal" data-target="#modalSearch">&nbsp;<i
                class="iconfont icon-search"></i>&nbsp;</a>
          </li>
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

    <div class="banner" id="banner" parallax=true
         style="background: url('/img/post.png') no-repeat center center;
           background-size: cover;">
      <div class="full-bg-img">
        <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
          <div class="page-header text-center fade-in-up">
            <span class="h2" id="subtitle" title="数据库">
              
            </span>

            
              <div class="mt-3">
  
  
    <span class="post-meta">
      <i class="iconfont icon-date-fill" aria-hidden="true"></i>
      <time datetime="2022-01-14 17:14" pubdate>
        2022年1月14日 下午
      </time>
    </span>
  
</div>

<div class="mt-1">
  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-chart"></i>
      2.3k 字
    </span>
  

  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-clock-fill"></i>
      
      
      36
       分钟
    </span>
  

  
  
</div>

            
          </div>

          
        </div>
      </div>
    </div>
  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="d-none d-lg-block col-lg-2"></div>
    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div class="py-5" id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">数据库</h1>
            
            <div class="markdown-body">
              <h1 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h1><p>数据库：data base(db)数据仓库，一堆文件里记录一堆信息。</p>
<p>数据库管理系统：data base management(DBMS)管理数据库中的数据的工具，对数据进行增删改查。</p>
<p>常见的数据库管理系统：MySQL、Oracle、DB2…</p>
<p>SQL: 结构化查询语言，DBMS执行语句来操控数据。他是通用的语言。</p>
<p>端口号是：3306</p>
<p>一些常见命令：</p>
<ol>
<li><p>show databases; (展示所有的库)</p>
</li>
<li><p>show tables; (展示所有的库)</p>
</li>
<li><p>use 名字 ; （使用库）</p>
</li>
<li><p>create 名字; （创建库）</p>
</li>
<li><p>source 地址 （导入库）</p>
</li>
<li><p>select* from 名字（从库里查表）</p>
</li>
<li><p>desc 名字 （查表的结构）</p>
</li>
<li><p>select 名字1 from 名字2 (从名字2里查名字1)</p>
<p>select dname,deptno from dept （查两个）</p>
<p>select* from 名字（都查）</p>
<p>select dname as deptname,deptno from dept (将deptno起别名，as可省)</p>
<p>select dname deptname,deptno from dept;</p>
<p>select dname ‘dept name’,deptno from dept;</p>
<p>select dname “dept name”,deptno from dept;  //orical里用不了</p>
</li>
</ol>
<p><strong>基本单元是表</strong></p>
<p><strong>SQL语句分类：</strong></p>
<p>DQL：</p>
<p>​        数据查询语言（带有select）</p>
<p>DML：</p>
<p>​        数据操作语言（对数据进行增删改）</p>
<p>​        insert  delete  update</p>
<p>DDL：</p>
<p>​        数据定义语言（带有create\drop\alter）</p>
<p>​        操作的是表的结构，删字段，加字段</p>
<p>TCL：</p>
<p>​        事务控制语言</p>
<p>​        包括：</p>
<p>​                事务提交：commit</p>
<p>​                事务回滚：rollback</p>
<p>DCL：</p>
<p>​        数据控制语言</p>
<p>​        例如：授权grant\撤销授权revoke </p>
<h2 id="导入表"><a href="#导入表" class="headerlink" title="导入表"></a>导入表</h2><p>导入一个库要先使用这个库</p>
<p>里面有好几个表</p>
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc"><span class="hljs-code">+-----------------------+</span><br><span class="hljs-section">| Tables_in_bjpowernode |</span><br><span class="hljs-section">+-----------------------+</span><br>| dept                  |<br>| emp                   |<br><span class="hljs-section">| salgrade              |</span><br><span class="hljs-section">+-----------------------+</span><br></code></pre></td></tr></table></figure>



<figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs gherkin">//select<span class="hljs-symbol">*</span> from emp<br>+-------+--------+-----------+------+------------+---------+---------+--------+<br>|<span class="hljs-string"> EMPNO </span>|<span class="hljs-string"> ENAME  </span>|<span class="hljs-string"> JOB       </span>|<span class="hljs-string"> MGR  </span>|<span class="hljs-string"> HIREDATE   </span>|<span class="hljs-string"> SAL     </span>|<span class="hljs-string"> COMM    </span>|<span class="hljs-string"> DEPTNO </span>|<br>+-------+--------+-----------+------+------------+---------+---------+--------+<br>|<span class="hljs-string">  7369 </span>|<span class="hljs-string"> SMITH  </span>|<span class="hljs-string"> CLERK     </span>|<span class="hljs-string"> 7902 </span>|<span class="hljs-string"> 1980-12-17 </span>|<span class="hljs-string">  800.00 </span>|<span class="hljs-string">    NULL </span>|<span class="hljs-string">     20 </span>|<br>|<span class="hljs-string">  7499 </span>|<span class="hljs-string"> ALLEN  </span>|<span class="hljs-string"> SALESMAN  </span>|<span class="hljs-string"> 7698 </span>|<span class="hljs-string"> 1981-02-20 </span>|<span class="hljs-string"> 1600.00 </span>|<span class="hljs-string">  300.00 </span>|<span class="hljs-string">     30 </span>|<br>|<span class="hljs-string">  7521 </span>|<span class="hljs-string"> WARD   </span>|<span class="hljs-string"> SALESMAN  </span>|<span class="hljs-string"> 7698 </span>|<span class="hljs-string"> 1981-02-22 </span>|<span class="hljs-string"> 1250.00 </span>|<span class="hljs-string">  500.00 </span>|<span class="hljs-string">     30 </span>|<br>|<span class="hljs-string">  7566 </span>|<span class="hljs-string"> JONES  </span>|<span class="hljs-string"> MANAGER   </span>|<span class="hljs-string"> 7839 </span>|<span class="hljs-string"> 1981-04-02 </span>|<span class="hljs-string"> 2975.00 </span>|<span class="hljs-string">    NULL </span>|<span class="hljs-string">     20 </span>|<br>|<span class="hljs-string">  7654 </span>|<span class="hljs-string"> MARTIN </span>|<span class="hljs-string"> SALESMAN  </span>|<span class="hljs-string"> 7698 </span>|<span class="hljs-string"> 1981-09-28 </span>|<span class="hljs-string"> 1250.00 </span>|<span class="hljs-string"> 1400.00 </span>|<span class="hljs-string">     30 </span>|<br>|<span class="hljs-string">  7698 </span>|<span class="hljs-string"> BLAKE  </span>|<span class="hljs-string"> MANAGER   </span>|<span class="hljs-string"> 7839 </span>|<span class="hljs-string"> 1981-05-01 </span>|<span class="hljs-string"> 2850.00 </span>|<span class="hljs-string">    NULL </span>|<span class="hljs-string">     30 </span>|<br>|<span class="hljs-string">  7782 </span>|<span class="hljs-string"> CLARK  </span>|<span class="hljs-string"> MANAGER   </span>|<span class="hljs-string"> 7839 </span>|<span class="hljs-string"> 1981-06-09 </span>|<span class="hljs-string"> 2450.00 </span>|<span class="hljs-string">    NULL </span>|<span class="hljs-string">     10 </span>|<br>|<span class="hljs-string">  7788 </span>|<span class="hljs-string"> SCOTT  </span>|<span class="hljs-string"> ANALYST   </span>|<span class="hljs-string"> 7566 </span>|<span class="hljs-string"> 1987-04-19 </span>|<span class="hljs-string"> 3000.00 </span>|<span class="hljs-string">    NULL </span>|<span class="hljs-string">     20 </span>|<br>|<span class="hljs-string">  7839 </span>|<span class="hljs-string"> KING   </span>|<span class="hljs-string"> PRESIDENT </span>|<span class="hljs-string"> NULL </span>|<span class="hljs-string"> 1981-11-17 </span>|<span class="hljs-string"> 5000.00 </span>|<span class="hljs-string">    NULL </span>|<span class="hljs-string">     10 </span>|<br>|<span class="hljs-string">  7844 </span>|<span class="hljs-string"> TURNER </span>|<span class="hljs-string"> SALESMAN  </span>|<span class="hljs-string"> 7698 </span>|<span class="hljs-string"> 1981-09-08 </span>|<span class="hljs-string"> 1500.00 </span>|<span class="hljs-string">    0.00 </span>|<span class="hljs-string">     30 </span>|<br>|<span class="hljs-string">  7876 </span>|<span class="hljs-string"> ADAMS  </span>|<span class="hljs-string"> CLERK     </span>|<span class="hljs-string"> 7788 </span>|<span class="hljs-string"> 1987-05-23 </span>|<span class="hljs-string"> 1100.00 </span>|<span class="hljs-string">    NULL </span>|<span class="hljs-string">     20 </span>|<br>|<span class="hljs-string">  7900 </span>|<span class="hljs-string"> JAMES  </span>|<span class="hljs-string"> CLERK     </span>|<span class="hljs-string"> 7698 </span>|<span class="hljs-string"> 1981-12-03 </span>|<span class="hljs-string">  950.00 </span>|<span class="hljs-string">    NULL </span>|<span class="hljs-string">     30 </span>|<br>|<span class="hljs-string">  7902 </span>|<span class="hljs-string"> FORD   </span>|<span class="hljs-string"> ANALYST   </span>|<span class="hljs-string"> 7566 </span>|<span class="hljs-string"> 1981-12-03 </span>|<span class="hljs-string"> 3000.00 </span>|<span class="hljs-string">    NULL </span>|<span class="hljs-string">     20 </span>|<br>|<span class="hljs-string">  7934 </span>|<span class="hljs-string"> MILLER </span>|<span class="hljs-string"> CLERK     </span>|<span class="hljs-string"> 7782 </span>|<span class="hljs-string"> 1982-01-23 </span>|<span class="hljs-string"> 1300.00 </span>|<span class="hljs-string">    NULL </span>|<span class="hljs-string">     10 </span>|<br>+-------+--------+-----------+------+------------+---------+---------+--------+<br></code></pre></td></tr></table></figure>

<figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs gherkin">//desc 查emp的结构<br>+----------+-------------+------+-----+---------+-------+<br>|<span class="hljs-string"> Field    </span>|<span class="hljs-string"> Type        </span>|<span class="hljs-string"> Null </span>|<span class="hljs-string"> Key </span>|<span class="hljs-string"> Default </span>|<span class="hljs-string"> Extra </span>|<br>+----------+-------------+------+-----+---------+-------+<br>|<span class="hljs-string"> EMPNO    </span>|<span class="hljs-string"> int(4)      </span>|<span class="hljs-string"> NO   </span>|<span class="hljs-string"> PRI </span>|<span class="hljs-string"> NULL    </span>|<span class="hljs-string">       </span>|<br>|<span class="hljs-string"> ENAME    </span>|<span class="hljs-string"> varchar(10) </span>|<span class="hljs-string"> YES  </span>|<span class="hljs-string">     </span>|<span class="hljs-string"> NULL    </span>|<span class="hljs-string">       </span>|<br>|<span class="hljs-string"> JOB      </span>|<span class="hljs-string"> varchar(9)  </span>|<span class="hljs-string"> YES  </span>|<span class="hljs-string">     </span>|<span class="hljs-string"> NULL    </span>|<span class="hljs-string">       </span>|<br>|<span class="hljs-string"> MGR      </span>|<span class="hljs-string"> int(4)      </span>|<span class="hljs-string"> YES  </span>|<span class="hljs-string">     </span>|<span class="hljs-string"> NULL    </span>|<span class="hljs-string">       </span>|<br>|<span class="hljs-string"> HIREDATE </span>|<span class="hljs-string"> date        </span>|<span class="hljs-string"> YES  </span>|<span class="hljs-string">     </span>|<span class="hljs-string"> NULL    </span>|<span class="hljs-string">       </span>|<br>|<span class="hljs-string"> SAL      </span>|<span class="hljs-string"> double(7,2) </span>|<span class="hljs-string"> YES  </span>|<span class="hljs-string">     </span>|<span class="hljs-string"> NULL    </span>|<span class="hljs-string">       </span>|<br>|<span class="hljs-string"> COMM     </span>|<span class="hljs-string"> double(7,2) </span>|<span class="hljs-string"> YES  </span>|<span class="hljs-string">     </span>|<span class="hljs-string"> NULL    </span>|<span class="hljs-string">       </span>|<br>|<span class="hljs-string"> DEPTNO   </span>|<span class="hljs-string"> int(2)      </span>|<span class="hljs-string"> YES  </span>|<span class="hljs-string">     </span>|<span class="hljs-string"> NULL    </span>|<span class="hljs-string">       </span>|<br>+----------+-------------+------+-----+---------+-------+<br></code></pre></td></tr></table></figure>

<h2 id="字段使用数学表达式"><a href="#字段使用数学表达式" class="headerlink" title="字段使用数学表达式"></a>字段使用数学表达式</h2><p>select ename,sal*12 from emp;</p>
<h1 id="DQL查询"><a href="#DQL查询" class="headerlink" title="DQL查询"></a>DQL查询</h1><p>select empno,ename,sal from emp; (emp中查对应字段)</p>
<p>select empno, ename, sal from emp where sal&lt;2000；（查出sal小于2000的值）</p>
<p>比较符号有’&lt;’ ‘&gt;’ ‘&lt;&gt;’ ‘&lt;=’ ‘&gt;=’ ‘=’ ‘!=’。&lt;&gt;是不等于</p>
<p>select empno, ename, sal from emp where sal&gt;2000&amp;&amp;sal&lt;3000;（查找sal在2000到3000之间的，&amp;&amp;是并且）</p>
<p>&amp;&amp; 和 and 等价，|| 和 or等价。</p>
<p>select* from emp where sal&gt;2500 and (deptno=10 or deptno=20);</p>
<p>and比较级大于or,可以加括号区分比较级</p>
<p>select empno, ename, sal from emp where sal between 2000 and 3000;（查找sal在2000到3000之间的）</p>
<p>betwon a and b表示区间[a,b]</p>
<p>select empno,sal, comm from emp where comm is null;（查不是null的）</p>
<p>只能是is null，不可以是=null,同理is not null</p>
<p> select* from emp where deptno in (10,20);（查值为10与20的）</p>
<p>模糊查询</p>
<p>select ename,sal from emp where ename like ‘%A%’;（名字含A的）</p>
<p>select ename,sal from emp where ename like ‘_A%’;（第二个字母是A的）</p>
<p>%好似。。。</p>
<p>_只省略一个</p>
<h2 id="排序"><a href="#排序" class="headerlink" title="排序"></a>排序</h2><p>select 。。。 from 。。。 order by 。。。;</p>
<p>select ename,sal from emp order by sal <strong>desc</strong>;（逆序）</p>
<p>select ename,sal from emp order by sal asc;（正序）</p>
<p>select ename,sal from emp order by sal,ename;（按sal排，再按ename排）</p>
<p> select 。。。 from 。。。 where sal between 。。。 and 。。。 order by 。。。;（综合）</p>
<h2 id="单行处理函数"><a href="#单行处理函数" class="headerlink" title="单行处理函数"></a>单行处理函数</h2><p>lower()将字符串小写</p>
<p>upper()将字符串大写</p>
<p>ifnull(null,num)判断是否为空</p>
<p>length()字符串长度</p>
<p>round()四舍五入</p>
<p>rand()随即数</p>
<h2 id="分组查询"><a href="#分组查询" class="headerlink" title="分组查询"></a>分组查询</h2><p><strong>分组查询：对每一组进行操作</strong></p>
<p>要先分组再使用,没分整张表就是一组</p>
<p>函数：</p>
<p>max()</p>
<p>min()</p>
<p>avg()</p>
<p>count()</p>
<p>sum()</p>
<p><strong>自动忽略null</strong></p>
<p><strong>不能用于where 后</strong></p>
<p>select…from…where…group by…order by…</p>
<p>顺序：</p>
<ol>
<li>from</li>
<li>where</li>
<li>group by</li>
<li>select</li>
<li>order by</li>
</ol>
<p>例找出每个部门的最高薪资。</p>
<p>select job,max(sal) from emp group by job;</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs markdown">select deptno,max(sal) from emp group by deptno;<br>+--------+----------+<br>| deptno | max(sal) |<br>+--------+----------+<br>|     10 |  5000.00 |<br>|     20 |  3000.00 |<br>|     30 |  2850.00 |<br>+--------+----------+<br></code></pre></td></tr></table></figure>

<p>select 后加别的组没意义</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs markdown"> select ename,deptno,max(sal) from emp group by deptno;<br>+-------+--------+----------+<br>| ename | deptno | max(sal) |<br>+-------+--------+----------+<br>| CLARK |     10 |  5000.00 |<br>| SMITH |     20 |  3000.00 |<br>| ALLEN |     30 |  2850.00 |<br>+-------+--------+----------+<br></code></pre></td></tr></table></figure>

<p>可以同时分为多个组</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs markdown">select deptno,job,sum(sal) from emp group by deptno,job;<br>+--------+-----------+----------+<br>| deptno | job       | sum(sal) |<br>+--------+-----------+----------+<br>|     10 | CLERK     |  1300.00 |<br>|     10 | MANAGER   |  2450.00 |<br>|     10 | PRESIDENT |  5000.00 |<br>|     20 | ANALYST   |  6000.00 |<br>|     20 | CLERK     |  1900.00 |<br>|     20 | MANAGER   |  2975.00 |<br>|     30 | CLERK     |   950.00 |<br>|     30 | MANAGER   |  2850.00 |<br>|     30 | SALESMAN  |  5600.00 |<br>+--------+-----------+----------+<br></code></pre></td></tr></table></figure>

<p>having 子句可以对分组后的数据过滤</p>
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc"><span class="hljs-section"> select deptno,max(sal) from emp group by deptno having max(sal)&gt;3000;</span><br><span class="hljs-section">+--------+----------+</span><br><span class="hljs-section">| deptno | max(sal) |</span><br><span class="hljs-section">+--------+----------+</span><br><span class="hljs-section">|     10 |  5000.00 |</span><br><span class="hljs-section">+--------+----------+</span><br></code></pre></td></tr></table></figure>

<p>where 也可以实现</p>
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc"><span class="hljs-section">select deptno,max(sal) from emp where sal&gt;3000 group by deptno;</span><br><span class="hljs-section">+--------+----------+</span><br><span class="hljs-section">| deptno | max(sal) |</span><br><span class="hljs-section">+--------+----------+</span><br><span class="hljs-section">|     10 |  5000.00 |</span><br><span class="hljs-section">+--------+----------+</span><br></code></pre></td></tr></table></figure>

<p>区别在于having 是先分组再筛选，where是先筛选再分组</p>
<p>where效率高于having</p>
<h2 id="去重"><a href="#去重" class="headerlink" title="去重"></a>去重</h2><p>distinct+字段</p>
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc"><span class="hljs-section">select distinct job,deptno from emp;</span><br><span class="hljs-section">+-----------+--------+</span><br><span class="hljs-section">| job       | deptno |</span><br><span class="hljs-section">+-----------+--------+</span><br>| CLERK     |     20 |<br>| SALESMAN  |     30 |<br>| MANAGER   |     20 |<br>| MANAGER   |     30 |<br>| MANAGER   |     10 |<br>| ANALYST   |     20 |<br>| PRESIDENT |     10 |<br>| CLERK     |     30 |<br><span class="hljs-section">| CLERK     |     10 |</span><br><span class="hljs-section">+-----------+--------+</span><br></code></pre></td></tr></table></figure>

<h2 id="连接查询"><a href="#连接查询" class="headerlink" title="连接查询"></a>连接查询</h2><p>将多张表联合起来查询</p>
<p>根据表连接的方式分类：<br>    内连接：</p>
<p>​        等值连接</p>
<p>​        非等值连接</p>
<p>​        子链接</p>
<p>  外连接：</p>
<p>​        左外连接（左连接）</p>
<p>​        右外连接（右链接）</p>
<p>  全连接</p>
<p><strong>笛卡尔积现象</strong>：两张表联合查询没有任何限制时，全排列，进行了笛卡尔积。</p>
<p>加上限制条件就可以避免笛卡尔积现象，但匹配次数还是笛卡尔积的次数。</p>
<h3 id="内连接等值连接"><a href="#内连接等值连接" class="headerlink" title="内连接等值连接"></a>内连接等值连接</h3><p>sql99:</p>
<figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs gherkin">select e.ename,d.dname from emp e join dept d on e.deptno=d.deptno;<br>+--------+------------+<br>|<span class="hljs-string"> ename  </span>|<span class="hljs-string"> dname      </span>|<br>+--------+------------+<br>|<span class="hljs-string"> SMITH  </span>|<span class="hljs-string"> RESEARCH   </span>|<br>|<span class="hljs-string"> ALLEN  </span>|<span class="hljs-string"> SALES      </span>|<br>|<span class="hljs-string"> WARD   </span>|<span class="hljs-string"> SALES      </span>|<br>|<span class="hljs-string"> JONES  </span>|<span class="hljs-string"> RESEARCH   </span>|<br>|<span class="hljs-string"> MARTIN </span>|<span class="hljs-string"> SALES      </span>|<br>|<span class="hljs-string"> BLAKE  </span>|<span class="hljs-string"> SALES      </span>|<br>|<span class="hljs-string"> CLARK  </span>|<span class="hljs-string"> ACCOUNTING </span>|<br>|<span class="hljs-string"> SCOTT  </span>|<span class="hljs-string"> RESEARCH   </span>|<br>|<span class="hljs-string"> KING   </span>|<span class="hljs-string"> ACCOUNTING </span>|<br>|<span class="hljs-string"> TURNER </span>|<span class="hljs-string"> SALES      </span>|<br>|<span class="hljs-string"> ADAMS  </span>|<span class="hljs-string"> RESEARCH   </span>|<br>|<span class="hljs-string"> JAMES  </span>|<span class="hljs-string"> SALES      </span>|<br>|<span class="hljs-string"> FORD   </span>|<span class="hljs-string"> RESEARCH   </span>|<br>|<span class="hljs-string"> MILLER </span>|<span class="hljs-string"> ACCOUNTING </span>|<br>+--------+------------+<br></code></pre></td></tr></table></figure>

<p>on是连接的条件，where后还可加条件。</p>
<p>sql92:</p>
<figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs gherkin">select e.ename,d.dname from emp e,dept d where e.deptno=d.deptno;<br>+--------+------------+<br>|<span class="hljs-string"> ename  </span>|<span class="hljs-string"> dname      </span>|<br>+--------+------------+<br>|<span class="hljs-string"> SMITH  </span>|<span class="hljs-string"> RESEARCH   </span>|<br>|<span class="hljs-string"> ALLEN  </span>|<span class="hljs-string"> SALES      </span>|<br>|<span class="hljs-string"> WARD   </span>|<span class="hljs-string"> SALES      </span>|<br>|<span class="hljs-string"> JONES  </span>|<span class="hljs-string"> RESEARCH   </span>|<br>|<span class="hljs-string"> MARTIN </span>|<span class="hljs-string"> SALES      </span>|<br>|<span class="hljs-string"> BLAKE  </span>|<span class="hljs-string"> SALES      </span>|<br>|<span class="hljs-string"> CLARK  </span>|<span class="hljs-string"> ACCOUNTING </span>|<br>|<span class="hljs-string"> SCOTT  </span>|<span class="hljs-string"> RESEARCH   </span>|<br>|<span class="hljs-string"> KING   </span>|<span class="hljs-string"> ACCOUNTING </span>|<br>|<span class="hljs-string"> TURNER </span>|<span class="hljs-string"> SALES      </span>|<br>|<span class="hljs-string"> ADAMS  </span>|<span class="hljs-string"> RESEARCH   </span>|<br>|<span class="hljs-string"> JAMES  </span>|<span class="hljs-string"> SALES      </span>|<br>|<span class="hljs-string"> FORD   </span>|<span class="hljs-string"> RESEARCH   </span>|<br>|<span class="hljs-string"> MILLER </span>|<span class="hljs-string"> ACCOUNTING </span>|<br>+--------+------------+<br></code></pre></td></tr></table></figure>

<h3 id="内连接非等值连接"><a href="#内连接非等值连接" class="headerlink" title="内连接非等值连接"></a>内连接非等值连接</h3><figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs gherkin"> select<span class="hljs-symbol">*</span> from emp e inner join salgrade s on e.sal between s.losal and hisal;<br>+-------+--------+-----------+------+------------+---------+---------+--------+-------+-------+-------+<br>|<span class="hljs-string"> EMPNO </span>|<span class="hljs-string"> ENAME  </span>|<span class="hljs-string"> JOB       </span>|<span class="hljs-string"> MGR  </span>|<span class="hljs-string"> HIREDATE   </span>|<span class="hljs-string"> SAL     </span>|<span class="hljs-string"> COMM    </span>|<span class="hljs-string"> DEPTNO </span>|<span class="hljs-string"> GRADE </span>|<span class="hljs-string"> LOSAL </span>|<span class="hljs-string"> HISAL </span>|<br>+-------+--------+-----------+------+------------+---------+---------+--------+-------+-------+-------+<br>|<span class="hljs-string">  7369 </span>|<span class="hljs-string"> SMITH  </span>|<span class="hljs-string"> CLERK     </span>|<span class="hljs-string"> 7902 </span>|<span class="hljs-string"> 1980-12-17 </span>|<span class="hljs-string">  800.00 </span>|<span class="hljs-string">    NULL </span>|<span class="hljs-string">     20 </span>|<span class="hljs-string">     1 </span>|<span class="hljs-string">   700 </span>|<span class="hljs-string">  1200 </span>|<br>|<span class="hljs-string">  7499 </span>|<span class="hljs-string"> ALLEN  </span>|<span class="hljs-string"> SALESMAN  </span>|<span class="hljs-string"> 7698 </span>|<span class="hljs-string"> 1981-02-20 </span>|<span class="hljs-string"> 1600.00 </span>|<span class="hljs-string">  300.00 </span>|<span class="hljs-string">     30 </span>|<span class="hljs-string">     3 </span>|<span class="hljs-string">  1401 </span>|<span class="hljs-string">  2000 </span>|<br>|<span class="hljs-string">  7521 </span>|<span class="hljs-string"> WARD   </span>|<span class="hljs-string"> SALESMAN  </span>|<span class="hljs-string"> 7698 </span>|<span class="hljs-string"> 1981-02-22 </span>|<span class="hljs-string"> 1250.00 </span>|<span class="hljs-string">  500.00 </span>|<span class="hljs-string">     30 </span>|<span class="hljs-string">     2 </span>|<span class="hljs-string">  1201 </span>|<span class="hljs-string">  1400 </span>|<br>|<span class="hljs-string">  7566 </span>|<span class="hljs-string"> JONES  </span>|<span class="hljs-string"> MANAGER   </span>|<span class="hljs-string"> 7839 </span>|<span class="hljs-string"> 1981-04-02 </span>|<span class="hljs-string"> 2975.00 </span>|<span class="hljs-string">    NULL </span>|<span class="hljs-string">     20 </span>|<span class="hljs-string">     4 </span>|<span class="hljs-string">  2001 </span>|<span class="hljs-string">  3000 </span>|<br>|<span class="hljs-string">  7654 </span>|<span class="hljs-string"> MARTIN </span>|<span class="hljs-string"> SALESMAN  </span>|<span class="hljs-string"> 7698 </span>|<span class="hljs-string"> 1981-09-28 </span>|<span class="hljs-string"> 1250.00 </span>|<span class="hljs-string"> 1400.00 </span>|<span class="hljs-string">     30 </span>|<span class="hljs-string">     2 </span>|<span class="hljs-string">  1201 </span>|<span class="hljs-string">  1400 </span>|<br>|<span class="hljs-string">  7698 </span>|<span class="hljs-string"> BLAKE  </span>|<span class="hljs-string"> MANAGER   </span>|<span class="hljs-string"> 7839 </span>|<span class="hljs-string"> 1981-05-01 </span>|<span class="hljs-string"> 2850.00 </span>|<span class="hljs-string">    NULL </span>|<span class="hljs-string">     30 </span>|<span class="hljs-string">     4 </span>|<span class="hljs-string">  2001 </span>|<span class="hljs-string">  3000 </span>|<br>|<span class="hljs-string">  7782 </span>|<span class="hljs-string"> CLARK  </span>|<span class="hljs-string"> MANAGER   </span>|<span class="hljs-string"> 7839 </span>|<span class="hljs-string"> 1981-06-09 </span>|<span class="hljs-string"> 2450.00 </span>|<span class="hljs-string">    NULL </span>|<span class="hljs-string">     10 </span>|<span class="hljs-string">     4 </span>|<span class="hljs-string">  2001 </span>|<span class="hljs-string">  3000 </span>|<br>|<span class="hljs-string">  7788 </span>|<span class="hljs-string"> SCOTT  </span>|<span class="hljs-string"> ANALYST   </span>|<span class="hljs-string"> 7566 </span>|<span class="hljs-string"> 1987-04-19 </span>|<span class="hljs-string"> 3000.00 </span>|<span class="hljs-string">    NULL </span>|<span class="hljs-string">     20 </span>|<span class="hljs-string">     4 </span>|<span class="hljs-string">  2001 </span>|<span class="hljs-string">  3000 </span>|<br>|<span class="hljs-string">  7839 </span>|<span class="hljs-string"> KING   </span>|<span class="hljs-string"> PRESIDENT </span>|<span class="hljs-string"> NULL </span>|<span class="hljs-string"> 1981-11-17 </span>|<span class="hljs-string"> 5000.00 </span>|<span class="hljs-string">    NULL </span>|<span class="hljs-string">     10 </span>|<span class="hljs-string">     5 </span>|<span class="hljs-string">  3001 </span>|<span class="hljs-string">  9999 </span>|<br>|<span class="hljs-string">  7844 </span>|<span class="hljs-string"> TURNER </span>|<span class="hljs-string"> SALESMAN  </span>|<span class="hljs-string"> 7698 </span>|<span class="hljs-string"> 1981-09-08 </span>|<span class="hljs-string"> 1500.00 </span>|<span class="hljs-string">    0.00 </span>|<span class="hljs-string">     30 </span>|<span class="hljs-string">     3 </span>|<span class="hljs-string">  1401 </span>|<span class="hljs-string">  2000 </span>|<br>|<span class="hljs-string">  7876 </span>|<span class="hljs-string"> ADAMS  </span>|<span class="hljs-string"> CLERK     </span>|<span class="hljs-string"> 7788 </span>|<span class="hljs-string"> 1987-05-23 </span>|<span class="hljs-string"> 1100.00 </span>|<span class="hljs-string">    NULL </span>|<span class="hljs-string">     20 </span>|<span class="hljs-string">     1 </span>|<span class="hljs-string">   700 </span>|<span class="hljs-string">  1200 </span>|<br>|<span class="hljs-string">  7900 </span>|<span class="hljs-string"> JAMES  </span>|<span class="hljs-string"> CLERK     </span>|<span class="hljs-string"> 7698 </span>|<span class="hljs-string"> 1981-12-03 </span>|<span class="hljs-string">  950.00 </span>|<span class="hljs-string">    NULL </span>|<span class="hljs-string">     30 </span>|<span class="hljs-string">     1 </span>|<span class="hljs-string">   700 </span>|<span class="hljs-string">  1200 </span>|<br>|<span class="hljs-string">  7902 </span>|<span class="hljs-string"> FORD   </span>|<span class="hljs-string"> ANALYST   </span>|<span class="hljs-string"> 7566 </span>|<span class="hljs-string"> 1981-12-03 </span>|<span class="hljs-string"> 3000.00 </span>|<span class="hljs-string">    NULL </span>|<span class="hljs-string">     20 </span>|<span class="hljs-string">     4 </span>|<span class="hljs-string">  2001 </span>|<span class="hljs-string">  3000 </span>|<br>|<span class="hljs-string">  7934 </span>|<span class="hljs-string"> MILLER </span>|<span class="hljs-string"> CLERK     </span>|<span class="hljs-string"> 7782 </span>|<span class="hljs-string"> 1982-01-23 </span>|<span class="hljs-string"> 1300.00 </span>|<span class="hljs-string">    NULL </span>|<span class="hljs-string">     10 </span>|<span class="hljs-string">     2 </span>|<span class="hljs-string">  1201 </span>|<span class="hljs-string">  1400 </span>|<br>+-------+--------+-----------+------+------------+---------+---------+--------+-------+-------+-------+<br></code></pre></td></tr></table></figure>

<h3 id="内连接自链接"><a href="#内连接自链接" class="headerlink" title="内连接自链接"></a>内连接自链接</h3><figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs gherkin">select a.ename,b.ename as mname from emp a inner join emp b on a.mgr=b.empno;<br>+--------+-------+<br>|<span class="hljs-string"> ename  </span>|<span class="hljs-string"> mname </span>|<br>+--------+-------+<br>|<span class="hljs-string"> SMITH  </span>|<span class="hljs-string"> FORD  </span>|<br>|<span class="hljs-string"> ALLEN  </span>|<span class="hljs-string"> BLAKE </span>|<br>|<span class="hljs-string"> WARD   </span>|<span class="hljs-string"> BLAKE </span>|<br>|<span class="hljs-string"> JONES  </span>|<span class="hljs-string"> KING  </span>|<br>|<span class="hljs-string"> MARTIN </span>|<span class="hljs-string"> BLAKE </span>|<br>|<span class="hljs-string"> BLAKE  </span>|<span class="hljs-string"> KING  </span>|<br>|<span class="hljs-string"> CLARK  </span>|<span class="hljs-string"> KING  </span>|<br>|<span class="hljs-string"> SCOTT  </span>|<span class="hljs-string"> JONES </span>|<br>|<span class="hljs-string"> TURNER </span>|<span class="hljs-string"> BLAKE </span>|<br>|<span class="hljs-string"> ADAMS  </span>|<span class="hljs-string"> SCOTT </span>|<br>|<span class="hljs-string"> JAMES  </span>|<span class="hljs-string"> BLAKE </span>|<br>|<span class="hljs-string"> FORD   </span>|<span class="hljs-string"> JONES </span>|<br>|<span class="hljs-string"> MILLER </span>|<span class="hljs-string"> CLARK </span>|<br>+--------+-------+<br></code></pre></td></tr></table></figure>

<h2 id="外连接"><a href="#外连接" class="headerlink" title="外连接"></a>外连接</h2><p>对比于内连接，外连接有了主次之分，可现实主表所有的元素。</p>
<figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs gherkin">内连接<br>select a.ename,b.ename from emp a join emp b on a.mgr=b.empno;<br>+--------+-------+<br>|<span class="hljs-string"> ename  </span>|<span class="hljs-string"> ename </span>|<br>+--------+-------+<br>|<span class="hljs-string"> SMITH  </span>|<span class="hljs-string"> FORD  </span>|<br>|<span class="hljs-string"> ALLEN  </span>|<span class="hljs-string"> BLAKE </span>|<br>|<span class="hljs-string"> WARD   </span>|<span class="hljs-string"> BLAKE </span>|<br>|<span class="hljs-string"> JONES  </span>|<span class="hljs-string"> KING  </span>|<br>|<span class="hljs-string"> MARTIN </span>|<span class="hljs-string"> BLAKE </span>|<br>|<span class="hljs-string"> BLAKE  </span>|<span class="hljs-string"> KING  </span>|<br>|<span class="hljs-string"> CLARK  </span>|<span class="hljs-string"> KING  </span>|<br>|<span class="hljs-string"> SCOTT  </span>|<span class="hljs-string"> JONES </span>|<br>|<span class="hljs-string"> TURNER </span>|<span class="hljs-string"> BLAKE </span>|<br>|<span class="hljs-string"> ADAMS  </span>|<span class="hljs-string"> SCOTT </span>|<br>|<span class="hljs-string"> JAMES  </span>|<span class="hljs-string"> BLAKE </span>|<br>|<span class="hljs-string"> FORD   </span>|<span class="hljs-string"> JONES </span>|<br>|<span class="hljs-string"> MILLER </span>|<span class="hljs-string"> CLARK </span>|<br>+--------+-------+<br></code></pre></td></tr></table></figure>

<figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs gherkin">//外连接<br>select a.ename,b.ename from emp a left join emp b on a.mgr=b.empno;<br>+--------+-------+<br>|<span class="hljs-string"> ename  </span>|<span class="hljs-string"> ename </span>|<br>+--------+-------+<br>|<span class="hljs-string"> SMITH  </span>|<span class="hljs-string"> FORD  </span>|<br>|<span class="hljs-string"> ALLEN  </span>|<span class="hljs-string"> BLAKE </span>|<br>|<span class="hljs-string"> WARD   </span>|<span class="hljs-string"> BLAKE </span>|<br>|<span class="hljs-string"> JONES  </span>|<span class="hljs-string"> KING  </span>|<br>|<span class="hljs-string"> MARTIN </span>|<span class="hljs-string"> BLAKE </span>|<br>|<span class="hljs-string"> BLAKE  </span>|<span class="hljs-string"> KING  </span>|<br>|<span class="hljs-string"> CLARK  </span>|<span class="hljs-string"> KING  </span>|<br>|<span class="hljs-string"> SCOTT  </span>|<span class="hljs-string"> JONES </span>|<br>|<span class="hljs-string"> KING   </span>|<span class="hljs-string"> NULL  </span>|<br>|<span class="hljs-string"> TURNER </span>|<span class="hljs-string"> BLAKE </span>|<br>|<span class="hljs-string"> ADAMS  </span>|<span class="hljs-string"> SCOTT </span>|<br>|<span class="hljs-string"> JAMES  </span>|<span class="hljs-string"> BLAKE </span>|<br>|<span class="hljs-string"> FORD   </span>|<span class="hljs-string"> JONES </span>|<br>|<span class="hljs-string"> MILLER </span>|<span class="hljs-string"> CLARK </span>|<br>+--------+-------+<br></code></pre></td></tr></table></figure>

<p>join 前加left就是左连接，加right就是右链接</p>
<h2 id="三表连接"><a href="#三表连接" class="headerlink" title="三表连接"></a>三表连接</h2><figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs gherkin"> select e.ename,d.dname,e.sal,s.grade from emp e join dept d on e.deptno=d.deptno<br>    -&gt; join salgrade s on e.sal between s.losal and s.hisal;<br>+--------+------------+---------+-------+<br>|<span class="hljs-string"> ename  </span>|<span class="hljs-string"> dname      </span>|<span class="hljs-string"> sal     </span>|<span class="hljs-string"> grade </span>|<br>+--------+------------+---------+-------+<br>|<span class="hljs-string"> SMITH  </span>|<span class="hljs-string"> RESEARCH   </span>|<span class="hljs-string">  800.00 </span>|<span class="hljs-string">     1 </span>|<br>|<span class="hljs-string"> ALLEN  </span>|<span class="hljs-string"> SALES      </span>|<span class="hljs-string"> 1600.00 </span>|<span class="hljs-string">     3 </span>|<br>|<span class="hljs-string"> WARD   </span>|<span class="hljs-string"> SALES      </span>|<span class="hljs-string"> 1250.00 </span>|<span class="hljs-string">     2 </span>|<br>|<span class="hljs-string"> JONES  </span>|<span class="hljs-string"> RESEARCH   </span>|<span class="hljs-string"> 2975.00 </span>|<span class="hljs-string">     4 </span>|<br>|<span class="hljs-string"> MARTIN </span>|<span class="hljs-string"> SALES      </span>|<span class="hljs-string"> 1250.00 </span>|<span class="hljs-string">     2 </span>|<br>|<span class="hljs-string"> BLAKE  </span>|<span class="hljs-string"> SALES      </span>|<span class="hljs-string"> 2850.00 </span>|<span class="hljs-string">     4 </span>|<br>|<span class="hljs-string"> CLARK  </span>|<span class="hljs-string"> ACCOUNTING </span>|<span class="hljs-string"> 2450.00 </span>|<span class="hljs-string">     4 </span>|<br>|<span class="hljs-string"> SCOTT  </span>|<span class="hljs-string"> RESEARCH   </span>|<span class="hljs-string"> 3000.00 </span>|<span class="hljs-string">     4 </span>|<br>|<span class="hljs-string"> KING   </span>|<span class="hljs-string"> ACCOUNTING </span>|<span class="hljs-string"> 5000.00 </span>|<span class="hljs-string">     5 </span>|<br>|<span class="hljs-string"> TURNER </span>|<span class="hljs-string"> SALES      </span>|<span class="hljs-string"> 1500.00 </span>|<span class="hljs-string">     3 </span>|<br>|<span class="hljs-string"> ADAMS  </span>|<span class="hljs-string"> RESEARCH   </span>|<span class="hljs-string"> 1100.00 </span>|<span class="hljs-string">     1 </span>|<br>|<span class="hljs-string"> JAMES  </span>|<span class="hljs-string"> SALES      </span>|<span class="hljs-string">  950.00 </span>|<span class="hljs-string">     1 </span>|<br>|<span class="hljs-string"> FORD   </span>|<span class="hljs-string"> RESEARCH   </span>|<span class="hljs-string"> 3000.00 </span>|<span class="hljs-string">     4 </span>|<br>|<span class="hljs-string"> MILLER </span>|<span class="hljs-string"> ACCOUNTING </span>|<span class="hljs-string"> 1300.00 </span>|<span class="hljs-string">     2 </span>|<br>+--------+------------+---------+-------+<br></code></pre></td></tr></table></figure>

<h2 id="子查询"><a href="#子查询" class="headerlink" title="子查询"></a>子查询</h2><h3 id="where-后的子查询"><a href="#where-后的子查询" class="headerlink" title="where 后的子查询"></a>where 后的子查询</h3><p>查询结果当条件</p>
<figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs gherkin">select ename,sal from emp where sal&gt;(select min(sal) from emp);<br>+--------+---------+<br>|<span class="hljs-string"> ename  </span>|<span class="hljs-string"> sal     </span>|<br>+--------+---------+<br>|<span class="hljs-string"> ALLEN  </span>|<span class="hljs-string"> 1600.00 </span>|<br>|<span class="hljs-string"> WARD   </span>|<span class="hljs-string"> 1250.00 </span>|<br>|<span class="hljs-string"> JONES  </span>|<span class="hljs-string"> 2975.00 </span>|<br>|<span class="hljs-string"> MARTIN </span>|<span class="hljs-string"> 1250.00 </span>|<br>|<span class="hljs-string"> BLAKE  </span>|<span class="hljs-string"> 2850.00 </span>|<br>|<span class="hljs-string"> CLARK  </span>|<span class="hljs-string"> 2450.00 </span>|<br>|<span class="hljs-string"> SCOTT  </span>|<span class="hljs-string"> 3000.00 </span>|<br>|<span class="hljs-string"> KING   </span>|<span class="hljs-string"> 5000.00 </span>|<br>|<span class="hljs-string"> TURNER </span>|<span class="hljs-string"> 1500.00 </span>|<br>|<span class="hljs-string"> ADAMS  </span>|<span class="hljs-string"> 1100.00 </span>|<br>|<span class="hljs-string"> JAMES  </span>|<span class="hljs-string">  950.00 </span>|<br>|<span class="hljs-string"> FORD   </span>|<span class="hljs-string"> 3000.00 </span>|<br>|<span class="hljs-string"> MILLER </span>|<span class="hljs-string"> 1300.00 </span>|<br>+--------+---------+<br></code></pre></td></tr></table></figure>

<h3 id="from-后的子查询"><a href="#from-后的子查询" class="headerlink" title="from 后的子查询"></a>from 后的子查询</h3><p>查询结果当表</p>
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc"><span class="hljs-code"> select </span><br><span class="hljs-code"> 	e.job,s.grade </span><br><span class="hljs-code"> from </span><br><span class="hljs-code"> 	(select job,avg(sal) avgsal from emp group by job) e </span><br><span class="hljs-code"> join </span><br><span class="hljs-code"> 	salgrade s </span><br><span class="hljs-code"> on </span><br><span class="hljs-code"> 	e.avgsal </span><br><span class="hljs-code"> between </span><br><span class="hljs-code"> 	s.losal and s.hisal </span><br><span class="hljs-code"> order by</span><br><span class="hljs-section">    grade asc;</span><br><span class="hljs-section">+-----------+-------+</span><br><span class="hljs-section">| job       | grade |</span><br><span class="hljs-section">+-----------+-------+</span><br>| CLERK     |     1 |<br>| SALESMAN  |     2 |<br>| ANALYST   |     4 |<br>| MANAGER   |     4 |<br><span class="hljs-section">| PRESIDENT |     5 |</span><br><span class="hljs-section">+-----------+-------+</span><br></code></pre></td></tr></table></figure>

<h3 id="select-后的子查询"><a href="#select-后的子查询" class="headerlink" title="select 后的子查询"></a>select 后的子查询</h3><p>当字段</p>
<figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs gherkin">select e.ename,(select d.dname from dept d where e.deptno=d.deptno) dname from emp e;<br>+--------+------------+<br>|<span class="hljs-string"> ename  </span>|<span class="hljs-string"> dname      </span>|<br>+--------+------------+<br>|<span class="hljs-string"> SMITH  </span>|<span class="hljs-string"> RESEARCH   </span>|<br>|<span class="hljs-string"> ALLEN  </span>|<span class="hljs-string"> SALES      </span>|<br>|<span class="hljs-string"> WARD   </span>|<span class="hljs-string"> SALES      </span>|<br>|<span class="hljs-string"> JONES  </span>|<span class="hljs-string"> RESEARCH   </span>|<br>|<span class="hljs-string"> MARTIN </span>|<span class="hljs-string"> SALES      </span>|<br>|<span class="hljs-string"> BLAKE  </span>|<span class="hljs-string"> SALES      </span>|<br>|<span class="hljs-string"> CLARK  </span>|<span class="hljs-string"> ACCOUNTING </span>|<br>|<span class="hljs-string"> SCOTT  </span>|<span class="hljs-string"> RESEARCH   </span>|<br>|<span class="hljs-string"> KING   </span>|<span class="hljs-string"> ACCOUNTING </span>|<br>|<span class="hljs-string"> TURNER </span>|<span class="hljs-string"> SALES      </span>|<br>|<span class="hljs-string"> ADAMS  </span>|<span class="hljs-string"> RESEARCH   </span>|<br>|<span class="hljs-string"> JAMES  </span>|<span class="hljs-string"> SALES      </span>|<br>|<span class="hljs-string"> FORD   </span>|<span class="hljs-string"> RESEARCH   </span>|<br>|<span class="hljs-string"> MILLER </span>|<span class="hljs-string"> ACCOUNTING </span>|<br>+--------+------------+<br></code></pre></td></tr></table></figure>

<h1 id="DDL"><a href="#DDL" class="headerlink" title="DDL"></a>DDL</h1><h2 id="建表"><a href="#建表" class="headerlink" title="建表"></a>建表</h2><p>create table 名字（</p>
<p>​    字段名 字段类型</p>
<p>​    。。。</p>
<p>）；</p>
<h2 id="删表"><a href="#删表" class="headerlink" title="删表"></a>删表</h2><p>drop table 名字；</p>
<h1 id="DML"><a href="#DML" class="headerlink" title="DML"></a>DML</h1><h2 id="增"><a href="#增" class="headerlink" title="增"></a>增</h2><p>insert into 表名 (字段，…) values (值，…)；</p>
<h2 id="改"><a href="#改" class="headerlink" title="改"></a>改</h2><p>update 表名 set 字段名=值，。。。where 条件；</p>
<h2 id="删"><a href="#删" class="headerlink" title="删"></a>删</h2><p>delete from 表名 where 条件；</p>

            </div>
            <hr>
            <div>
              <div class="post-metas mb-3">
                
                  <div class="post-meta mr-3">
                    <i class="iconfont icon-category"></i>
                    
                      <a class="hover-with-bg" href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库</a>
                    
                  </div>
                
                
                  <div class="post-meta">
                    <i class="iconfont icon-tags"></i>
                    
                      <a class="hover-with-bg" href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库</a>
                    
                  </div>
                
              </div>
              
                <p class="note note-warning">
                  
                    本博客所有文章除特别声明外，均采用 <a target="_blank" href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh" rel="nofollow noopener noopener">CC BY-SA 4.0 协议</a> ，转载请注明出处！
                  
                </p>
              
              
                <div class="post-prevnext">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2022/01/18/01%E8%83%8C%E5%8C%85/">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">01背包</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2022/01/12/%E7%BB%84%E5%90%88%E6%95%B0/">
                        <span class="hidden-mobile">组合数</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
              <!-- Comments -->
              <article class="comments" id="comments" lazyload>
                
                  
                
                
  <div class="disqus" style="width:100%">
    <div id="disqus_thread"></div>
    
      <script type="text/javascript">
        var disqus_config = function() {
          this.page.url = 'http://altriat.top/2022/01/14/%E6%95%B0%E6%8D%AE%E5%BA%93/';
          this.page.identifier = '/2022/01/14/%E6%95%B0%E6%8D%AE%E5%BA%93/';
        };
        Fluid.utils.loadComments('#disqus_thread', function() {
          var d = document, s = d.createElement('script');
          s.src = '//' + 'fluid' + '.disqus.com/embed.js';
          s.setAttribute('data-timestamp', new Date());
          (d.head || d.body).appendChild(s);
        });
      </script>
    
    <noscript>Please enable JavaScript to view the comments</noscript>
  </div>


              </article>
            
          </article>
        </div>
      </div>
    </div>
    
      <div class="d-none d-lg-block col-lg-2 toc-container" id="toc-ctn">
        <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;目录</p>
  <div class="toc-body" id="toc-body"></div>
</div>

      </div>
    
  </div>
</div>

<!-- Custom -->


    

    
      <a id="scroll-top-button" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v"
                 for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>
    

    
  </main>

  <footer class="text-center mt-5 py-3">
  <div class="footer-content">
     <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
  </div>
  

  

  
</footer>


  <!-- SCRIPTS -->
  
  <script  src="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" ></script>
<script  src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>

<!-- Plugins -->


  
    <script  src="/js/img-lazyload.js" ></script>
  



  



  <script  src="https://cdn.jsdelivr.net/npm/tocbot@4.12.3/dist/tocbot.min.js" ></script>



  <script  src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js" ></script>



  <script  src="https://cdn.jsdelivr.net/npm/anchor-js@4.3.1/anchor.min.js" ></script>



  <script defer src="https://cdn.jsdelivr.net/npm/clipboard@2.0.8/dist/clipboard.min.js" ></script>



  <script  src="/js/local-search.js" ></script>






  <script  src="https://cdn.jsdelivr.net/npm/typed.js@2.0.12/lib/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var title = document.getElementById('subtitle').title;
      
      typing(title)
      
    })(window, document);
  </script>





  

  
    <!-- MathJax -->
    <script>
      MathJax = {
        tex: {
          inlineMath: [['$', '$'], ['\\(', '\\)']]
        },
        options: {
          renderActions: {
            findScript: [10, doc => {
              document.querySelectorAll('script[type^="math/tex"]').forEach(node => {
                const display = !!node.type.match(/; *mode=display/);
                const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);
                const text = document.createTextNode('');
                node.parentNode.replaceChild(text, node);
                math.start = { node: text, delim: '', n: 0 };
                math.end = { node: text, delim: '', n: 0 };
                doc.math.push(math);
              });
            }, '', false],
            insertedScript: [200, () => {
              document.querySelectorAll('mjx-container').forEach(node => {
                let target = node.parentNode;
                if (target.nodeName.toLowerCase() === 'li') {
                  target.parentNode.classList.add('has-jax');
                }
              });
            }, '', false]
          }
        }
      };
    </script>

    <script async src="https://cdn.jsdelivr.net/npm/mathjax@3.1.4/es5/tex-svg.js" ></script>

  











<!-- 主题的启动项 保持在最底部 -->
<script  src="/js/boot.js" ></script>


</body>
</html>
